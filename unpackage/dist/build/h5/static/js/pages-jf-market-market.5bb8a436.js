(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-market-market"],{"3b71":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("e17c")),a=o(n("ca0a"));function o(t){return t&&t.__esModule?t:{default:t}}var s={components:{uniList:i.default,uniListItem:a.default},data:function(){return{productList:[],renderImage:!1,pageSize:10,currentPage:1,isFirstPage:!0,hasNextPage:!0,winH:"",topImage:"",userScore:0}},methods:{loadProductList:function(){var t=this;uni.showLoading({title:"加载中..."}),uni.request({url:this.GLOBAL.domain+"/integralGoods/selectIntegralGoodsList",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{pageSize:this.pageSize,pageNum:this.currentPage},success:function(e){if(0!=e.data.code&&!e.data.code||1001==e.data.code)return uni.showToast({title:e.data.msg,duration:3e3,icon:"none"}),void uni.reLaunch({url:"/pages/jf/login/login"});if(console.log("success_GoodsList----",e),200==e.statusCode){console.log("load page 第"+t.currentPage+"页");var n=e.data.data.list;t.productList=t.isFirstPage?n:t.productList.concat(n),t.isFirstPage=!1,t.currentPage+=1,t.hasNextPage=e.data.data.hasNextPage}},fail:function(t){console.log("fail_GoodsList---",t);var e=JSON.stringify(t);switch(t.error){case 13:e="连接超时";break;case 12:e="网络出错";break;case 19:e="访问拒绝"}uni.showModal({content:e,confirmText:"确定",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/jf/login/login"})}})},complete:function(){uni.hideLoading(),uni.stopPullDownRefresh()}})},lower:function(){this.loadProductList()},pullDown:function(){this.currentPage=1,this.productList=[],this.loadProductList()},getSystemInfoPage:function(){var t=this;uni.getSystemInfo({success:function(e){t.winH=e.windowHeight}})},getTopImage:function(){var t=this;uni.showLoading({title:"加载中..."}),uni.request({url:this.GLOBAL.domain+"/home/picture",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{location:2},success:function(e){if(0!=e.data.code&&!e.data.code||1001==e.data.code)return uni.showToast({title:e.data.msg,duration:3e3,icon:"none"}),void uni.reLaunch({url:"/pages/jf/login/login"});console.log("success_TopImage----",e),e.data.data.list.length>0&&(t.topImage=e.data.data.list[0].picUrl)},fail:function(t){console.log("failTopImage---",t);var e=JSON.stringify(t);switch(t.error){case 13:e="连接超时";break;case 12:e="网络出错";break;case 19:e="访问拒绝"}uni.showModal({content:e,confirmText:"确定",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/jf/login/login"})}})},complete:function(){uni.hideLoading()}})},getUserScore:function(){var t=this;uni.request({url:this.GLOBAL.domain+"/integralGoods/selectIntegralGoodsKYIntegral",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){if(0!=e.data.code&&!e.data.code||1001==e.data.code)return uni.showToast({title:e.data.msg,duration:3e3,icon:"none"}),void uni.reLaunch({url:"/pages/jf/login/login"});console.log("success_用户可用积分----",e),t.userScore=e.data.data},fail:function(t){console.log("fail_用户可用积分---",t);var e=JSON.stringify(t);switch(t.error){case 13:e="连接超时";break;case 12:e="网络出错";break;case 19:e="访问拒绝"}uni.showModal({content:e,confirmText:"确定",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/jf/login/login"})}})}})},toDetail:function(t){var e=t.goodId,n=this.userScore;uni.navigateTo({url:"/pages/jf/market/detail/marketDetail?goodId="+e+"&userScore="+n})},toLogs:function(){uni.navigateTo({url:"/pages/jf/market/log/log"})}},onLoad:function(){var t=this;this.loadProductList(),setTimeout(function(){t.renderImage=!0},300),this.getTopImage(),this.getUserScore()},onPullDownRefresh:function(){this.pullDown()}};e.default=s},"53d5":function(t,e,n){"use strict";n.r(e);var i=n("3b71"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"5d4e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"topImage"},[t.topImage.length>0?n("v-uni-image",{attrs:{src:t.topImage,mode:"aspectFill"}}):t._e()],1),n("uni-list",[n("uni-list-item",{attrs:{"show-badge":!0,"badge-text":"兑换记录",title:"可用积分："+t.userScore+"分"},on:{click:function(e){e=t.$handleEvent(e),t.toLogs(e)}}})],1),n("v-uni-scroll-view",{style:"height:"+t.winH+"px;",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){e=t.$handleEvent(e),t.lower(e)}}},[t.productList.length>0?n("v-uni-view",{staticClass:"uni-product-list"},[t._l(t.productList,function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"uni-product",on:{click:function(n){n=t.$handleEvent(n),t.toDetail(e)}}},[n("v-uni-view",{staticClass:"image-view"},[t.renderImage?n("v-uni-image",{staticClass:"uni-product-image",attrs:{src:"product.goodImg",mode:"aspectFit"}}):t._e()],1),n("v-uni-view",{staticClass:"uni-product-title"},[t._v(t._s(e.goodName))]),n("v-uni-view",{staticClass:"uni-product-price"},[n("v-uni-text",{staticClass:"uni-product-price-original"},[t._v(t._s(e.dhIntegral)+"积分")]),n("v-uni-text",{staticClass:"uni-product-tip"},[t._v("兑换")])],1)],1)]})],2):n("v-uni-view",{staticClass:"uni-noData-txt"},[t._v("暂无数据")]),t.productList.length>0&&!t.hasNextPage?n("v-uni-view",{staticClass:"uni-noMore-txt"},[t._v("无更多数据")]):t._e()],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"7e9b":function(t,e,n){"use strict";n.r(e);var i=n("5d4e"),a=n("53d5");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var s=n("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"96ffce5c",null);e["default"]=c.exports}}]);