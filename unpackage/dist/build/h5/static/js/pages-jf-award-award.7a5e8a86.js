(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-award-award"],{"6f83":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-form",{staticClass:"page-section",on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)}}},[a("v-uni-view",{staticClass:"page-section-title"},[e._v("*标题")]),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{staticStyle:{"font-size":"26upx"},attrs:{name:"title","auto-height":"true",maxlength:"-1"}})],1),a("hr"),a("v-uni-view",{staticClass:"page-section-title"},[e._v("*内容")]),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{staticStyle:{"font-size":"26upx"},attrs:{name:"content","auto-height":"true",maxlength:"-1"}})],1),a("hr"),a("v-uni-view",[a("v-uni-label",[e._v("积分类型：")]),a("v-uni-input",{attrs:{type:"text",value:e.types[e.arrIndexType].name,name:"type",disabled:"true"}})],1),a("hr"),a("v-uni-view",[a("v-uni-label",[e._v("*输入分数：")]),a("v-uni-input",{attrs:{type:"text",name:"points"}})],1),a("v-uni-view",{staticClass:"page-section-title"},[e._v("备注")]),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{staticStyle:{"font-size":"28upx"},attrs:{"auto-height":"true",name:"remark"}})],1),a("hr"),a("v-uni-view",{staticClass:"select-section"},[a("robby-image-upload",{attrs:{"server-url":e.serverUrl},on:{delete:function(t){t=e.$handleEvent(t),e.deleteImage(t)},add:function(t){t=e.$handleEvent(t),e.addImage(t)}},model:{value:e.imageData,callback:function(t){e.imageData=t},expression:"imageData"}})],1),a("hr"),a("v-uni-picker",{attrs:{value:e.arrIndexApply,range:e.apply,"range-key":"userName",name:"apply"},on:{change:function(t){t=e.$handleEvent(t),e.changeApply(t)}}},[a("v-uni-view",{staticClass:"row"},[a("v-uni-view",{staticClass:"row-title"},[e._v("申请人")]),a("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.apply[e.arrIndexApply].userName))]),a("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/static/img/arrowright.png",mode:"aspectFill"}})],1)],1),a("v-uni-picker",{attrs:{value:e.arrIndexApprover,range:e.approver,"range-key":"userName",name:"approver"},on:{change:function(t){t=e.$handleEvent(t),e.changeApprover(t)}}},[a("v-uni-view",{staticClass:"row"},[a("v-uni-view",{staticClass:"row-title"},[e._v("审批人")]),a("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.approver[e.arrIndexApprover].userName))]),a("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/static/img/arrowright.png",mode:"aspectFill"}})],1)],1),a("v-uni-view",{staticClass:"select-section"},[a("v-uni-view",{staticClass:"title"},[e._v("抄送"),a("v-uni-text",{staticClass:"details"},[e._v("审批通过后，通知抄送人")])],1),a("v-uni-view",{staticClass:"add-wrapper"},[a("v-uni-text",{staticClass:"add",attrs:{onTap:"showFilter"}},[e._v("+")])],1)],1),a("v-uni-button",{staticClass:"button-form",attrs:{"form-type":"submit",type:"primary",loading:e.loading,disabled:e.disabled}},[e._v("提交")])],1)],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},7284:function(e,t,a){"use strict";var i=a("cab4"),n=a.n(i);n.a},7563:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".row[data-v-bb623bf2]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 %?30?%}.row-title[data-v-bb623bf2]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:%?28?%;padding-bottom:%?28?%;font-size:%?34?%;color:#000}.row-extra[data-v-bb623bf2]{-webkit-flex-basis:initial;-ms-flex-preferred-size:initial;flex-basis:auto;font-size:%?32?%;color:#888}.row-arrow[data-v-bb623bf2]{width:%?32?%;height:%?32?%;margin-left:%?16?%}.page[data-v-bb623bf2]{min-height:100%;padding-bottom:%?10?%;font-size:%?14?%}.am-input-label[data-v-bb623bf2]{font-weight:700}.page-section-title[data-v-bb623bf2]{font-weight:700}.row-title[data-v-bb623bf2]{font-size:%?14?%;font-weight:700}.row-extra[data-v-bb623bf2]{font-size:%?12?%}.am-input-content[data-v-bb623bf2]{font-size:%?13?%}.button-form[data-v-bb623bf2]{font-size:%?17?%;height:%?44?%;line-height:%?44?%;margin-left:%?10?%;margin-right:%?10?%}.picture-btns[data-v-bb623bf2]{height:%?40?%;line-height:%?40?%;color:#3296fa;font-size:%?14?%;text-align:center}.picture-btns .details[data-v-bb623bf2]{font-weight:400;font-size:%?12?%;color:#888;margin-left:%?7?%}.am-input-line-bottom[data-v-bb623bf2]{display:none}\n\n/* .page-section-btns {\n  border-top: none;\n} */\n\n/* 批量添加组件 */.select-section[data-v-bb623bf2]{padding:0 %?30?%}.select-section .title[data-v-bb623bf2]{font-weight:700;line-height:%?40?%;font-size:%?14?%}.select-section .title .details[data-v-bb623bf2]{font-weight:400;font-size:%?12?%;color:#888;margin-left:%?7?%}.add-wrapper[data-v-bb623bf2]{width:%?40?%;display:inline-block;text-align:center;margin:0 %?14?% %?14?% 0}.add-wrapper .add[data-v-bb623bf2]{height:%?37?%;width:%?37?%;-webkit-border-radius:50%;border-radius:50%;background:#eee;display:inline-block;line-height:%?37?%;text-align:center;font-size:%?37?%;color:#999;vertical-align:bottom}.add-wrapper .name[data-v-bb623bf2]{margin-top:%?4?%;display:inline-block;font-size:%?13?%;color:#888}.add-wrapper-new[data-v-bb623bf2]{width:%?40?%;display:inline-block;text-align:center;margin:0 %?27?% %?14?% 0}.add-wrapper-new .add[data-v-bb623bf2]{height:%?60?%;width:%?60?%;background:#eee;display:inline-block;line-height:%?60?%;text-align:center;font-size:%?37?%;color:#999;vertical-align:bottom}",""])},"828b":function(e,t,a){"use strict";a.r(t);var i=a("6f83"),n=a("db65");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("7284");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"bb623bf2",null);t["default"]=r.exports},cab4:function(e,t,a){var i=a("7563");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("dd077c20",i,!0,{sourceMap:!1,shadowMode:!1})},db65:function(e,t,a){"use strict";a.r(t);var i=a("df82"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},df82:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a("2748")),n=o(a("bc60"));function o(e){return e&&e.__esModule?e:{default:e}}var s={components:{robbyImageUpload:i.default,uniDrawer:n.default},data:function(){return{arrIndexApprover:0,arrIndexApply:0,arrIndexType:4,approver:[],apply:[],copy:[],types:[],loading:!1,disabled:!1,ChooseImgDrawer:!1,upLoadImgFile:[],enableDel:!1,enableAdd:!1,limitNumber:9,imageData:[],serverUrl:this.GLOBAL.domain+"/upload/uploadFile"}},onLoad:function(e){this.getApply(),this.getApprover(),this.getType()},methods:{deleteImage:function(e){console.log(e)},addImage:function(e){console.log("addImage==",e);for(var t=[],a=0;a<e.allImages.length;a++)t.push(JSON.parse(e.allImages[a]).data);this.upLoadImgFile=t,console.log("页面upLoadImgFiles",this.upLoadImgFile)},getType:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/rank/selectType",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log("success_selectType_获取积分类型",t),200==t.statusCode&&(e.types=t.data.data)},fail:function(t){console.log("fail_selectType_获取积分类型",t),e.GLOBAL.failHttp(t)}})},getApprover:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/declareBehaviorDetail/approverPel",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(0!=t.data.code&&!t.data.code||1001==t.data.code)return uni.showToast({title:t.data.msg,duration:3e3,icon:"none"}),void uni.reLaunch({url:"/pages/jf/login/login"});console.log("success_获取审批人",t),200==t.statusCode&&e.approver.push(t.data.data)},fail:function(e){console.log("fail_获取审批人",e);var t=JSON.stringify(e);switch(e.error){case 13:t="连接超时";break;case 12:t="网络出错";break;case 19:t="访问拒绝"}uni.showModal({content:t,confirmText:"确定",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/jf/login/login"})}})}})},getApply:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/selectSysUser",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log("success_获取申请人",t),e.GLOBAL.successHttp(t),200==t.statusCode&&e.apply.push(t.data.data)},fail:function(t){console.log("fail_获取申请人",t),e.GLOBAL.failHttp(t)}})},allUsers:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/declareBehaviorDetail/selectAllDeptUser",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{pageSize:100,pageNum:1,search:""},success:function(t){e.GLOBAL.successHttp(t),console.log("success抄送人---",t),e.copy=t.data.data.list},fail:function(t){console.log("fail_获取抄送人",t),e.GLOBAL.failHttp(t)}})},changeApply:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexApply=e.detail.value},changeApprover:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexApprover=e.detail.value},formSubmit:function(e){var t=this;console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));var a=this,i=a.apply[e.detail.value.apply].userId,n=a.approver[e.detail.value.approver].userId,o=e.detail.value.points,s=e.detail.value.remark,r=e.detail.value.title,l=e.detail.value.content,c=a.types[a.arrIndexType].id;console.log("apply:"+[i]+",approver:"+[n]+",points:"+o+",pic:"+[a.upLoadImgFile]+",title:"+r+",typeId:"+c),r&&l&&o?(uni.showLoading({mask:!0,title:"提交中..."}),a.loading=!0,a.disabled=!0,uni.request({url:this.GLOBAL.domain+"/free/freeIntegralApprover",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{addIntegral:o,approvalImg:a.upLoadImgFile,spRemark:s,typeId:c,from:[i],to:[],apps:[n],approvalTitle:r,approvalContent:l},success:function(e){console.log("success_申请成功----",e),t.GLOBAL.successHttp(e),uni.showModal({content:"申请成功",showCancel:!1,success:function(){uni.navigateBack()}})},fail:function(e){console.log("fail_申请失败",e),t.GLOBAL.failHttp(e)},complete:function(){a.loading=!1,a.disabled=!1,uni.hideLoading()}})):uni.showModal({content:"请您填写关键内容",showCancel:!1})},showChooseImgDrawer:function(){this.ChooseImgDrawer=!0},closeDrawer:function(){this.ChooseImgDrawer=!1}}};t.default=s}}]);