(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-takePublish-takePublish"],{"2b28":function(t,e,n){"use strict";n.r(e);var i=n("4597"),a=n("4867");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("c59d");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"716020ca",null);e["default"]=r.exports},"2b8b":function(t,e,n){"use strict";n.r(e);var i=n("eab3"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},3486:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-page-body",staticStyle:{"padding-bottom":"0"}},[n("uni-segmented-control",{attrs:{current:t.tabCurrent,values:t.tabItems,"style-type":"text","active-color":"#007aff"},on:{clickItem:function(e){e=t.$handleEvent(e),t.onClickTabItem(e)}}}),n("v-uni-scroll-view",{style:"height:"+t.winH+"px;",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){e=t.$handleEvent(e),t.lower(e)}}},[t.listData.length>0?n("v-uni-view",{staticClass:"uni-list"},[t._l(t.listData,function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"list-item",staticStyle:{position:"relative"}},[n("v-uni-view",{staticClass:"flex-space-between"},[n("v-uni-text",{staticClass:"uni-title",staticStyle:{flex:"8"}},[t._v(t._s(e.title))]),n("v-uni-text",{staticClass:"uni-title",staticStyle:{color:"#4d96f5",flex:"1.5"}},[t._v(t._s(e.taskIntegral>0?"+":"")+t._s(e.taskIntegral)+"分")])],1),n("v-uni-view",{staticClass:"uni-text",staticStyle:{padding:"10upx 0"}},[t._v(t._s(e.content))]),n("v-uni-view",{staticClass:"form-line"}),n("v-uni-view",{staticClass:"flex-space-between"},[n("v-uni-view",{staticClass:"uni-text"},[null!=e.peopleNum?n("v-uni-view",[t._v("剩余名额："+t._s(e.peopleNum)+"人")]):n("v-uni-view",[t._v("限制人数：无")]),n("v-uni-view",[t._v("截止时间："+t._s(e.endTime?e.endTime:"无"))])],1),n("v-uni-text",{staticClass:"uni-text",style:"0"==e.userState?"color:#FDDA00":"1"==e.userState?"color:#4d96f5":"2"==e.userState?"color:#F77500":"3"==e.userState?"color:#1AA034":"color:#DD4F43"},[t._v(t._s("0"==e.userState?"发布中":"1"==e.userState?"已领取":"2"==e.userState?"审批中":"3"==e.userState?"已完成":"已拒绝"))])],1),n("v-uni-view",{staticClass:"people",staticStyle:{padding:"10upx 0"}},[n("v-uni-text",{staticClass:"uni-text-small"},[t._v("已接受此任务人员：")]),e.taskAndUserList?t._l(e.taskAndUserList,function(e,i){return n("v-uni-text",{key:i,staticClass:"uni-text-small"},[t._v(t._s(e.userName)+"，")])}):n("v-uni-text",{staticClass:"uni-text-small"},[t._v("暂无")])],2),0==e.userState?n("v-uni-view",{staticClass:"change_btn",on:{click:function(n){n=t.$handleEvent(n),t.change(e,i)}}},[n("v-uni-button",{staticClass:"button-form",attrs:{type:"primary",loading:t.loading,disabled:t.disabled}},[t._v("选择接受这项任务")])],1):t._e(),1==e.userState?n("v-uni-view",{staticClass:"change_btn",on:{click:function(n){n=t.$handleEvent(n),t.commit(e,i)}}},[n("v-uni-button",{staticClass:"button-form",attrs:{type:"warn"}},[t._v("提交完成这项任务")])],1):t._e(),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0!=e.userState&&1!=e.userState,expression:"item.userState != 0 && item.userState != 1"}],staticClass:"list-mask"})],1)]})],2):n("v-uni-view",{staticClass:"uni-noData-txt"},[t._v("暂无数据")]),t.listData.length>0&&!t.hasNextPage?n("v-uni-view",{staticClass:"uni-noMore-txt"},[t._v("无更多数据")]):t._e()],1)],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"3c51":function(t,e,n){var i=n("e5da");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5c9f435e",i,!0,{sourceMap:!1,shadowMode:!1})},"3d32":function(t,e,n){var i=n("d0b07");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("0fa9aac8",i,!0,{sourceMap:!1,shadowMode:!1})},4389:function(t,e,n){"use strict";var i=n("3c51"),a=n.n(i);a.a},4597:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===t.styleType},style:{borderColor:"text"===t.styleType?"":t.activeColor}},t._l(t.values,function(e,i){return n("v-uni-view",{key:i,staticClass:"segmented-control-item",class:[{text:"text"===t.styleType},{active:i===t.currentIndex}],style:{color:i===t.currentIndex?"text"===t.styleType?t.activeColor:"#fff":"text"===t.styleType?"#000":t.activeColor,backgroundColor:i===t.currentIndex&&"button"===t.styleType?t.activeColor:""},on:{click:function(e){e=t.$handleEvent(e),t._onClick(i)}}},[t._v(t._s(e))])}),1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},4867:function(t,e,n){"use strict";n.r(e);var i=n("4f01"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"4f01":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}};e.default=i},6699:function(t,e,n){"use strict";n.r(e);var i=n("3486"),a=n("2b8b");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("4389");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"05868d08",null);e["default"]=r.exports},c59d:function(t,e,n){"use strict";var i=n("3d32"),a=n.n(i);a.a},d0b07:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".segmented-control[data-v-716020ca]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:75%;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden;border:%?1?% solid;-webkit-border-radius:%?10?%;border-radius:%?10?%}.segmented-control.text[data-v-716020ca]{border:0;-webkit-border-radius:0;border-radius:0}.segmented-control-item[data-v-716020ca]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;line-height:%?80?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:%?1?% solid}.segmented-control-item.active[data-v-716020ca]{color:#fff}.segmented-control-item.text[data-v-716020ca]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-716020ca]{border-bottom-style:solid}.segmented-control-item[data-v-716020ca]:first-child{border-left-width:0}",""])},e5da:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".list-item[data-v-05868d08]{background-color:#fff;padding:%?24?%;border-bottom:%?20?% solid #ddd}",""])},eab3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("2b28"));function a(t){return t&&t.__esModule?t:{default:t}}var s={components:{uniSegmentedControl:i.default},data:function(){return{tabCurrent:0,status:2,tabItems:["抢单任务","挑战任务","日常任务"],listData:[],pageSize:10,currentPage:1,isFirstPage:!0,hasNextPage:!0,disabled:!1,loading:!1,loginId:""}},onShow:function(){this.pullDown()},onLoad:function(){this.getSystemInfoPage()},onPullDownRefresh:function(){this.pullDown()},methods:{onClickTabItem:function(t){switch(t){case 0:this.status=2,this.pullDown();break;case 1:this.status=3,this.pullDown();break;case 2:this.status=1,this.pullDown();break}this.tabCurrent=t},showList:function(){var t=this;uni.showLoading({title:"加载中..."}),this.axios({url:this.GLOBAL.domain+"/task/allTask",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:this.$qs.stringify({pageSize:this.pageSize,pageNum:this.currentPage,times:this.status})}).then(function(e){var n=t;if(console.log("success_/task/allTask_悬赏任务列表",e),n.GLOBAL.successHttp(e),0==e.data.code){console.log("load page 第"+n.currentPage+"页");var i=e.data.data.list;n.listData=n.isFirstPage?i:n.listData.concat(i),n.isFirstPage=!1,n.currentPage+=1,n.hasNextPage=e.data.data.hasNextPage,console.log("数据列表："+n.listData.length+"条"),uni.getStorage({key:"USERS_KEY",success:function(t){n.listData.forEach(function(e){e.taskAndUserList&&e.taskAndUserList.forEach(function(n){console.log("9999",t.data.id),n.userId==t.data.id&&(e.userState=n.state)})})}})}uni.hideLoading(),uni.stopPullDownRefresh()}).catch(function(e){console.log("fail_/task/allTask_悬赏任务列表",e),t.GLOBAL.failHttp(e),uni.hideLoading(),uni.stopPullDownRefresh()})},change:function(t){var e=this;console.log(t),uni.showLoading({title:"加载中..."}),this.loading=!0,this.disabled=!0,this.axios({url:this.GLOBAL.domain+"/task/updateUserAndTaskStatus/"+t.rtId+"/"+t.userState,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("success_接受任务",t),e.GLOBAL.successHttp(t),0==t.data.code?(uni.showModal({content:"接受任务成功，请尽快完成",showCancel:!1}),e.pullDown()):uni.showModal({content:t.data.msg,showCancel:!1}),uni.hideLoading(),e.loading=!1,e.disabled=!1}).catch(function(t){console.log("fail__接受任务",t),e.GLOBAL.failHttp(t),uni.hideLoading(),e.loading=!1,e.disabled=!1})},commit:function(t){var e=t.title,n=t.content,i=t.taskIntegral,a=t.rtId,s=t.taskTypeId;console.log("跳转：","title:",e,",points:",i,",rtId:",a,",taskTypeId:",s);var o="/pages/jf/takePublish/commit/publishCommit?title="+e+"&content="+n+"&points="+i+"&rtId="+a+"&taskTypeId="+s;uni.navigateTo({url:o})},lower:function(){this.showList()},pullDown:function(){this.currentPage=1,this.listData=[],this.showList()},getSystemInfoPage:function(){var t=this;uni.getSystemInfo({success:function(e){t.winH=e.windowHeight}})}}};e.default=s}}]);