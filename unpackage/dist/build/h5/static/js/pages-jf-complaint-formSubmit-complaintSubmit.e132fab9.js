(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-complaint-formSubmit-complaintSubmit"],{"4f97":function(e,a,t){"use strict";t.r(a);var i=t("96e8"),n=t.n(i);for(var s in i)"default"!==s&&function(e){t.d(a,e,function(){return i[e]})}(s);a["default"]=n.a},5146:function(e,a,t){"use strict";t.r(a);var i=t("9aba"),n=t("4f97");for(var s in n)"default"!==s&&function(e){t.d(a,e,function(){return n[e]})}(s);t("b7cc");var o=t("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"138922aa",null);a["default"]=r.exports},"96e8":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=s(t("2748")),n=s(t("bc60"));function s(e){return e&&e.__esModule?e:{default:e}}var o={components:{robbyImageUpload:i.default,uniDrawer:n.default},data:function(){return{options:{},arrIndexPoints:0,arrIndexApprover:0,arrIndexApply:0,arrIndexTo:0,pointsArray:[],approver:[],apply:[],copy:[],ssuser:[],loading:!1,disabled:!1,ChooseImgDrawer:!1,upLoadImgFile:[],enableDel:!1,enableAdd:!1,limitNumber:9,imageData:[],serverUrl:this.GLOBAL.domain+"/upload/uploadFile"}},onLoad:function(e){console.log(e),this.options=e,this.pointsArray=[e.points],this.getApply(),this.getApprover(),this.getssUser()},methods:{deleteImage:function(e){console.log(e)},addImage:function(e){console.log("addImage==",e);for(var a=[],t=0;t<e.allImages.length;t++)a.push(JSON.parse(e.allImages[t]).data);this.upLoadImgFile=a,console.log("页面upLoadImgFiles",this.upLoadImgFile)},getssUser:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/complaint/selectComplaintPel",method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){console.log("success_selectComplaintPel_获取申诉人",a),200==a.statusCode&&e.ssuser.push(a.data.data.user)},fail:function(a){console.log("fail__selectComplaintPel_获取申诉人",a),e.GLOBAL.failHttp(a)}})},getApprover:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/declareBehaviorDetail/approverPel",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){if(0!=a.data.code&&!a.data.code||1001==a.data.code)return uni.showToast({title:a.data.msg,duration:3e3,icon:"none"}),void uni.reLaunch({url:"/pages/jf/login/login"});console.log("success_获取审批人",a),200==a.statusCode&&e.approver.push(a.data.data)},fail:function(e){console.log("fail_获取审批人",e);var a=JSON.stringify(e);switch(e.error){case 13:a="连接超时";break;case 12:a="网络出错";break;case 19:a="访问拒绝"}uni.showModal({content:a,confirmText:"确定",showCancel:!1,success:function(){uni.reLaunch({url:"/pages/jf/login/login"})}})}})},getApply:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/selectSysUser",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(a){console.log("success_获取申请人",a),e.GLOBAL.successHttp(a),200==a.statusCode&&e.apply.push(a.data.data)},fail:function(a){console.log("fail_获取申请人",a),e.GLOBAL.failHttp(a)}})},allUsers:function(){var e=this;uni.request({url:this.GLOBAL.domain+"/work/declareBehaviorDetail/selectAllDeptUser",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{pageSize:100,pageNum:1,search:""},success:function(a){e.GLOBAL.successHttp(a),console.log("success抄送人---",a),e.copy=a.data.data.list},fail:function(a){console.log("fail_获取抄送人",a),e.GLOBAL.failHttp(a)}})},changePoints:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexPoints=e.detail.value},changeApply:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexApply=e.detail.value},changeApprover:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexApprover=e.detail.value},changeSsUser:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.arrIndexTo=e.detail.value},formSubmit:function(e){var a=this;console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));var t=this;uni.showLoading({mask:!0,title:"提交中..."}),t.loading=!0,t.disabled=!0;var i=t.ssuser[e.detail.value.ssuser].userId,n=t.options.approvalId,s=e.detail.value.reason;console.log("appPelId:"+i+",approvalId:"+n+",appReason:"+s+",pic:"+[t.upLoadImgFile]),uni.request({url:this.GLOBAL.domain+"/complaint/addComplaint",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:{approvalId:n,pic:[t.upLoadImgFile],appReason:s,appPelId:i,to:[]},success:function(e){console.log("success_申请成功----",e),a.GLOBAL.successHttp(e),uni.showModal({content:"申请成功",confirmText:"确定",showCancel:!1,success:function(){uni.navigateBack()}})},fail:function(e){console.log("fail_申请失败",e),a.GLOBAL.failHttp(e)},complete:function(){t.loading=!1,t.disabled=!1,uni.hideLoading()}})},showChooseImgDrawer:function(){this.ChooseImgDrawer=!0},closeDrawer:function(){this.ChooseImgDrawer=!1}}};a.default=o},"9aba":function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"page"},[t("v-uni-form",{staticClass:"page-section",on:{submit:function(a){a=e.$handleEvent(a),e.formSubmit(a)}}},[t("v-uni-view",{staticClass:"page-section-title"},[e._v("标题")]),t("v-uni-view",{staticClass:"page-section-demo"},[t("v-uni-textarea",{staticStyle:{"font-size":"26upx"},attrs:{name:"title","auto-height":"true",maxlength:"-1",value:e.options.title,disabled:"true"}})],1),t("hr"),t("v-uni-view",{staticClass:"page-section-title"},[e._v("内容")]),t("v-uni-view",{staticClass:"page-section-demo"},[t("v-uni-textarea",{staticStyle:{"font-size":"26upx"},attrs:{name:"content","auto-height":"true",maxlength:"-1",value:e.options.content,disabled:"true"}})],1),t("hr"),t("v-uni-view",{},[t("v-uni-label",{staticClass:"title"},[e._v("积分类型：")]),t("v-uni-input",{staticClass:"uni-input",attrs:{className:"input-text",name:"type",disabled:"true",value:"1"==e.options.type?"品德积分":"2"==e.options.type?"业绩积分":"行为积分"}})],1),t("hr"),t("v-uni-view",{staticClass:"page-section-title"},[e._v("备注")]),t("v-uni-view",{staticClass:"page-section-demo"},[t("v-uni-textarea",{staticStyle:{"font-size":"28upx"},attrs:{"auto-height":"true",value:e.options.content,disabled:"true",name:"remark"}})],1),t("hr"),t("v-uni-view",{staticClass:"page-section-title"},[e._v("* 申诉理由")]),t("v-uni-view",{staticClass:"page-section-demo"},[t("v-uni-textarea",{staticStyle:{"font-size":"28upx"},attrs:{"auto-height":"",placeholder:"输入申诉理由",name:"reason"}})],1),t("hr"),t("v-uni-view",{staticClass:"select-section"},[t("robby-image-upload",{attrs:{"server-url":e.serverUrl},on:{delete:function(a){a=e.$handleEvent(a),e.deleteImage(a)},add:function(a){a=e.$handleEvent(a),e.addImage(a)}},model:{value:e.imageData,callback:function(a){e.imageData=a},expression:"imageData"}})],1),t("hr"),t("v-uni-picker",{attrs:{value:e.arrIndexPoints,range:e.pointsArray,name:"points"},on:{change:function(a){a=e.$handleEvent(a),e.changePoints(a)}}},[t("v-uni-view",{staticClass:"row"},[t("v-uni-view",{staticClass:"row-title"},[e._v("申请积分")]),t("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.pointsArray[e.arrIndexPoints]))]),t("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/static/img/arrowright.png",mode:"aspectFill"}})],1)],1),t("v-uni-picker",{attrs:{value:e.arrIndexApply,range:e.apply,"range-key":"userName",name:"apply"},on:{change:function(a){a=e.$handleEvent(a),e.changeApply(a)}}},[t("v-uni-view",{staticClass:"row"},[t("v-uni-view",{staticClass:"row-title"},[e._v("申请人")]),t("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.apply[e.arrIndexApply].userName))]),t("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/static/img/arrowright.png",mode:"aspectFill"}})],1)],1),t("v-uni-picker",{attrs:{value:e.arrIndexApprover,range:e.approver,"range-key":"userName",name:"approver"},on:{change:function(a){a=e.$handleEvent(a),e.changeApprover(a)}}},[t("v-uni-view",{staticClass:"row"},[t("v-uni-view",{staticClass:"row-title"},[e._v("审批人")]),t("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.approver[e.arrIndexApprover].userName))]),t("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/static/img/arrowright.png",mode:"aspectFill"}})],1)],1),t("v-uni-picker",{attrs:{onChange:"changeTo",value:e.arrIndexTo,range:e.ssuser,"range-key":"userName",name:"ssuser"}},[t("v-uni-view",{staticClass:"row"},[t("v-uni-view",{staticClass:"row-title"},[e._v("申诉人")]),t("v-uni-view",{staticClass:"row-extra"},[e._v("当前选择："+e._s(e.ssuser[e.arrIndexTo].userName))]),t("v-uni-image",{staticClass:"row-arrow",attrs:{src:"/image/arrowright.png",mode:"aspectFill"}})],1)],1),t("v-uni-view",{staticClass:"select-section"},[t("v-uni-view",{staticClass:"title"},[e._v("抄送"),t("v-uni-text",{staticClass:"details"},[e._v("审批通过后，通知抄送人")])],1),t("v-uni-view",{staticClass:"add-wrapper"},[t("v-uni-text",{staticClass:"add",attrs:{onTap:"showFilter"}},[e._v("+")])],1)],1),t("v-uni-button",{staticClass:"button-form",attrs:{"form-type":"submit",type:"primary",loading:e.loading,disabled:e.disabled}},[e._v("提交")])],1)],1)},n=[];t.d(a,"a",function(){return i}),t.d(a,"b",function(){return n})},b7cc:function(e,a,t){"use strict";var i=t("d37c"),n=t.n(i);n.a},d37c:function(e,a,t){var i=t("e2e4");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("4f06").default;n("25268d4a",i,!0,{sourceMap:!1,shadowMode:!1})},e2e4:function(e,a,t){a=e.exports=t("2350")(!1),a.push([e.i,".row[data-v-138922aa]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 %?30?%}.row-title[data-v-138922aa]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:%?28?%;padding-bottom:%?28?%;font-size:%?34?%;color:#000}.row-extra[data-v-138922aa]{-webkit-flex-basis:initial;-ms-flex-preferred-size:initial;flex-basis:auto;font-size:%?32?%;color:#888}.row-arrow[data-v-138922aa]{width:%?32?%;height:%?32?%;margin-left:%?16?%}.page[data-v-138922aa]{min-height:100%;padding-bottom:%?10?%;font-size:%?14?%}.am-input-label[data-v-138922aa]{font-weight:700}.page-section-title[data-v-138922aa]{font-weight:700}.row-title[data-v-138922aa]{font-size:%?14?%;font-weight:700}.row-extra[data-v-138922aa]{font-size:%?12?%}.am-input-content[data-v-138922aa]{font-size:%?13?%}.button-form[data-v-138922aa]{font-size:%?17?%;height:%?44?%;line-height:%?44?%;margin-left:%?10?%;margin-right:%?10?%}.picture-btns[data-v-138922aa]{height:%?40?%;line-height:%?40?%;color:#3296fa;font-size:%?14?%;text-align:center}.picture-btns .details[data-v-138922aa]{font-weight:400;font-size:%?12?%;color:#888;margin-left:%?7?%}.am-input-line-bottom[data-v-138922aa]{display:none}\n\n/* .page-section-btns {\n  border-top: none;\n} */\n\n/* 批量添加组件 */.select-section[data-v-138922aa]{padding:0 %?30?%}.select-section .title[data-v-138922aa]{font-weight:700;line-height:%?40?%;font-size:%?14?%}.select-section .title .details[data-v-138922aa]{font-weight:400;font-size:%?12?%;color:#888;margin-left:%?7?%}.add-wrapper[data-v-138922aa]{width:%?40?%;display:inline-block;text-align:center;margin:0 %?14?% %?14?% 0}.add-wrapper .add[data-v-138922aa]{height:%?37?%;width:%?37?%;-webkit-border-radius:50%;border-radius:50%;background:#eee;display:inline-block;line-height:%?37?%;text-align:center;font-size:%?37?%;color:#999;vertical-align:bottom}.add-wrapper .name[data-v-138922aa]{margin-top:%?4?%;display:inline-block;font-size:%?13?%;color:#888}.add-wrapper-new[data-v-138922aa]{width:%?40?%;display:inline-block;text-align:center;margin:0 %?27?% %?14?% 0}.add-wrapper-new .add[data-v-138922aa]{height:%?60?%;width:%?60?%;background:#eee;display:inline-block;line-height:%?60?%;text-align:center;font-size:%?37?%;color:#999;vertical-align:bottom}",""])}}]);