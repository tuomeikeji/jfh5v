(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-publish-daily-daily"],{"2a26":function(e,t,i){"use strict";i.r(t);var n=i("ea9f"),a=i("5394");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("9146");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"74bef146",null);t["default"]=r.exports},"2b28":function(e,t,i){"use strict";i.r(t);var n=i("4597"),a=i("4867");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("c59d");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"716020ca",null);t["default"]=r.exports},"3d32":function(e,t,i){var n=i("d0b07");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("0fa9aac8",n,!0,{sourceMap:!1,shadowMode:!1})},4597:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===e.styleType},style:{borderColor:"text"===e.styleType?"":e.activeColor}},e._l(e.values,function(t,n){return i("v-uni-view",{key:n,staticClass:"segmented-control-item",class:[{text:"text"===e.styleType},{active:n===e.currentIndex}],style:{color:n===e.currentIndex?"text"===e.styleType?e.activeColor:"#fff":"text"===e.styleType?"#000":e.activeColor,backgroundColor:n===e.currentIndex&&"button"===e.styleType?e.activeColor:""},on:{click:function(t){t=e.$handleEvent(t),e._onClick(n)}}},[e._v(e._s(t))])}),1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},"45fb":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("697c")),a=s(i("2b28"));function s(e){return e&&e.__esModule?e:{default:e}}var o={components:{uniDrawer:n.default,uniSegmentedControl:a.default},data:function(){return{allPoints:0,arrIndexType:6,types:[],checkedUserInfo:[],loading:!1,disabled:!1,showDrawer:!1,tabCurrent:0,tabItems:["部门","职位"],checkbox_Dept:[],checkbox_sysRoles:[],checkedDeptItem:[],checkedRoleItem:[],checkedDeptIds:[],checkedRoleIds:[]}},onLoad:function(e){this.getAllPoints(),this.getDept()},methods:{getAllPoints:function(){var e=this;this.axios({url:this.GLOBAL.domain+"/leader/leaderManageIntegral",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("success_leaderManageIntegral_管理者可用积分",t),e.GLOBAL.successHttp(t),0==t.data.code&&(e.allPoints=t.data.data)}).catch(function(t){console.log("fail_获取审批人",t),e.GLOBAL.failHttp(t)})},getDept:function(){var e=this;this.axios({url:this.GLOBAL.domain+"/releaseTask/releaseTaskPage",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("success_releaseTaskPage_部门职位",t),e.GLOBAL.successHttp(t),0==t.data.code&&(e.types=t.data.data.its,e.checkbox_sysRoles=t.data.data.posts,e.checkbox_Dept=t.data.data.depts)}).catch(function(t){console.log("fail_releaseTaskPage_部门职位",t),e.GLOBAL.failHttp(t)})},formSubmit:function(e){console.log("form发生了submit事件，携带数据为："+JSON.stringify(e.detail.value));var t=this,i=e.detail.value.addIntegral,n=e.detail.value.remark,a=e.detail.value.title,s=e.detail.value.content,o=t.types[t.arrIndexType].typeId;if(!a||!s||!i)return uni.showModal({content:"请输入必填项",showCancel:!1}),!1;if(a.length>50)return uni.showModal({content:"标题超过50字",showCancel:!1}),!1;var r=/^[0-9]\d*$/;return r.test(i)?i>t.allPoints?(uni.showModal({content:"您的积分不足",showCancel:!1}),!1):t.checkedDeptIds.length<0&&t.checkedRoleIds.length<0?(uni.showModal({content:"请选择接受此项任务的部门及职位",showCancel:!1}),!1):(console.log("表单提交数据:","addPoints:",i,t.allPoints,",title:",a,",typeId:",o,",deptId:",t.checkedDeptIds,",postId",t.checkedRoleIds),uni.showLoading({mask:!0,title:"提交中..."}),t.loading=!0,t.disabled=!0,void t.axios({url:t.GLOBAL.domain+"/releaseTask/saveReleTask",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:this.$qs.stringify({taskIntegral:i,remark:n,integralTypeId:o,title:a,content:s,taskTypeId:1,deptId:t.checkedDeptIds,postId:t.checkedRoleIds},{arrayFormat:"repeat"})}).then(function(e){console.log("success_申请成功----",e),t.GLOBAL.successHttp(e),0==e.data.code?uni.showModal({content:"提交成功",showCancel:!1,success:function(){uni.navigateBack()}}):uni.showModal({content:"提交发生错误，请重新提交",showCancel:!1}),t.loading=!1,t.disabled=!1,uni.hideLoading()}).catch(function(e){console.log("fail_申请失败",e),t.GLOBAL.failHttp(e),t.loading=!1,t.disabled=!1,uni.hideLoading()})):(uni.showModal({content:"分数项请输入正整数",showCancel:!1}),!1)},showDrawerFun:function(){this.showDrawer=!0},closeDrawer:function(){this.showDrawer=!1},onClickTabItem:function(e){this.tabCurrent!==e&&(this.tabCurrent=e)},formSubmitCheckbox:function(e){var t=this;console.log("formSubmitCheckbox选择部门，职位 携带值为:",e.detail.value);var i=[],n=[],a=[],s=[];e.detail.value.dept.forEach(function(e){i.push(JSON.parse(e)),n.push(JSON.parse(e).deptId)}),e.detail.value.sysRoles.forEach(function(e){a.push(JSON.parse(e)),s.push(JSON.parse(e).postId)}),this.checkedDeptItem=i,this.checkedDeptIds=n,this.checkedRoleItem=a,this.checkedRoleIds=s,this.checkbox_Dept.forEach(function(e){t.checkedDeptIds.some(function(t){return t==e.deptId})?e.checked=!0:e.checked=!1}),this.checkbox_sysRoles.forEach(function(e){t.checkedRoleIds.some(function(t){return t==e.postId})?e.checked=!0:e.checked=!1}),this.showDrawer=!1}}};t.default=o},4867:function(e,t,i){"use strict";i.r(t);var n=i("4f01"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},"497d":function(e,t,i){var n=i("b029");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("32a8ca4c",n,!0,{sourceMap:!1,shadowMode:!1})},"4f01":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(e){e!==this.currentIndex&&(this.currentIndex=e)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(e){this.currentIndex!==e&&(this.currentIndex=e,this.$emit("clickItem",e))}}};t.default=n},5394:function(e,t,i){"use strict";i.r(t);var n=i("45fb"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},"5a3e":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visibleSync?i("v-uni-view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":e.showDrawer,"uni-drawer--right":e.rightMode},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),t=e.$handleEvent(t),e.moveHandle(t)}}},[i("v-uni-view",{staticClass:"uni-drawer__mask",on:{click:function(t){t=e.$handleEvent(t),e.close(t)}}}),i("v-uni-view",{staticClass:"uni-drawer__content"},[e._t("default")],2)],1):e._e()},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},"697c":function(e,t,i){"use strict";i.r(t);var n=i("5a3e"),a=i("6df5");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("e986");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"6e5b5a1c",null);t["default"]=r.exports},"6df5":function(e,t,i){"use strict";i.r(t);var n=i("ad7d"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},9146:function(e,t,i){"use strict";var n=i("497d"),a=i.n(n);a.a},ad7d:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"UniDrawer",props:{visible:{type:Boolean,default:!1},mode:{type:String,default:""},mask:{type:Boolean,default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1}},watch:{visible:function(e){var t=this;clearTimeout(this.watchTimer),setTimeout(function(){t.showDrawer=e},100),this.visibleSync&&clearTimeout(this.closeTimer),e?this.visibleSync=e:this.watchTimer=setTimeout(function(){t.visibleSync=e},300)}},created:function(){var e=this;this.visibleSync=this.visible,setTimeout(function(){e.showDrawer=e.visible},100),this.rightMode="right"===this.mode},methods:{close:function(){var e=this;this.showDrawer=!1,this.closeTimer=setTimeout(function(){e.visibleSync=!1,e.$emit("close")},200)},moveHandle:function(){}}};t.default=n},b029:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".page-section-btns[data-v-74bef146]{position:fixed;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;border-top:%?1?% solid #ddd;padding:%?20?% %?24?%}.page-section-btns-cell[data-v-74bef146]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.page-section-btns-cell uni-button[data-v-74bef146]{border-radius:0;-webkit-border-radius:0}",""])},b5a3:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".uni-drawer[data-v-6e5b5a1c]{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:hidden;visibility:hidden;z-index:10001;height:100%}.uni-drawer.uni-drawer--right .uni-drawer__content[data-v-6e5b5a1c]{left:auto;right:0;-webkit-transform:translatex(100%);-ms-transform:translatex(100%);transform:translatex(100%)}.uni-drawer.uni-drawer--visible[data-v-6e5b5a1c]{visibility:visible}.uni-drawer.uni-drawer--visible .uni-drawer__content[data-v-6e5b5a1c]{-webkit-transform:translatex(0);-ms-transform:translatex(0);transform:translatex(0)}.uni-drawer.uni-drawer--visible .uni-drawer__mask[data-v-6e5b5a1c]{display:block;opacity:1}.uni-drawer__mask[data-v-6e5b5a1c]{display:block;opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);-webkit-transition:opacity .3s;-o-transition:opacity .3s;transition:opacity .3s}.uni-drawer__content[data-v-6e5b5a1c]{display:block;position:absolute;top:0;left:0;\n\t/* width: 61.8%; */width:100%;height:100%;background:#fff;-webkit-transition:all .3s ease-out;-o-transition:all .3s ease-out;transition:all .3s ease-out;-webkit-transform:translatex(-100%);-ms-transform:translatex(-100%);transform:translatex(-100%)}",""])},c59d:function(e,t,i){"use strict";var n=i("3d32"),a=i.n(n);a.a},d0b07:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".segmented-control[data-v-716020ca]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:75%;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden;border:%?1?% solid;-webkit-border-radius:%?10?%;border-radius:%?10?%}.segmented-control.text[data-v-716020ca]{border:0;-webkit-border-radius:0;border-radius:0}.segmented-control-item[data-v-716020ca]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;line-height:%?80?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:%?1?% solid}.segmented-control-item.active[data-v-716020ca]{color:#fff}.segmented-control-item.text[data-v-716020ca]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-716020ca]{border-bottom-style:solid}.segmented-control-item[data-v-716020ca]:first-child{border-left-width:0}",""])},db9f:function(e,t,i){var n=i("b5a3");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("93f2019e",n,!0,{sourceMap:!1,shadowMode:!1})},e986:function(e,t,i){"use strict";var n=i("db9f"),a=i.n(n);a.a},ea9f:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-page-body",staticStyle:{"background-color":"#FFFFFF"}},[i("v-uni-form",{staticClass:"page-section",on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)}}},[i("v-uni-view",{staticClass:"page-section-title"},[i("v-uni-text",{staticClass:"uni-text-red"},[e._v("*")]),e._v("任务目标："),i("v-uni-text",{staticClass:"uni-text-small"},[e._v("(标题不得超过50字)")])],1),i("v-uni-view",{staticClass:"page-section-demo"},[i("v-uni-textarea",{attrs:{name:"title","auto-height":"true",maxlength:"-1"}})],1),i("v-uni-view",{staticClass:"form-line"}),i("v-uni-view",{staticClass:"page-section-title"},[i("v-uni-text",{staticClass:"uni-text-red"},[e._v("*")]),e._v("任务内容：")],1),i("v-uni-view",{staticClass:"page-section-demo"},[i("v-uni-textarea",{attrs:{name:"content","auto-height":"true",maxlength:"-1"}})],1),i("v-uni-view",{staticClass:"form-line"}),i("v-uni-view",{staticClass:"clear"},[i("v-uni-label",{staticClass:"page-section-lable"},[e._v("积分类型：")]),i("v-uni-input",{staticClass:"page-section-input",attrs:{type:"text",value:e.types[e.arrIndexType].typeName,name:"type",disabled:"true"}})],1),i("v-uni-view",{staticClass:"form-line"}),i("v-uni-view",{staticClass:"page-section-title"},[e._v("备注：")]),i("v-uni-view",{staticClass:"page-section-demo"},[i("v-uni-textarea",{staticStyle:{"font-size":"28upx"},attrs:{"auto-height":"true",name:"remark"}})],1),i("v-uni-view",{staticClass:"form-line"}),i("v-uni-view",{staticStyle:{padding:"0 30upx 24upx 30upx"}},[i("v-uni-view",{staticClass:"uni-title"},[e._v("可用积分:"+e._s(e.allPoints)+"分")]),i("v-uni-view",{staticClass:"clear"},[i("v-uni-label",{staticClass:"page-section-lable",staticStyle:{padding:"0"},attrs:{for:"addIntegral"}},[e._v("奖励积分：")]),i("v-uni-input",{staticClass:"page-section-input",staticStyle:{border:"1px solid #EEEEEE",padding:"0"},attrs:{type:"text",id:"addIntegral",name:"addIntegral"}})],1)],1),i("v-uni-view",{staticClass:"form-line"}),i("v-uni-view",{staticClass:"select-section",staticStyle:{"padding-bottom":"20upx"}},[i("v-uni-view",{staticClass:"right-arrow",staticStyle:{color:"#4d96f5","font-size":"32upx",padding:"20upx 0"},on:{click:function(t){t=e.$handleEvent(t),e.showDrawerFun(t)}}},[i("v-uni-text",{staticClass:"uni-text-red"},[e._v("*")]),e._v("选择范围")],1),i("v-uni-view",{staticStyle:{"padding-bottom":"20upx"}},[i("v-uni-text",[e._v("所选部门：")]),e._l(e.checkedDeptItem,function(t){return[i("v-uni-text",[e._v(e._s(t.deptName)+"，")])]})],2),i("v-uni-view",[i("v-uni-text",[e._v("所选职位：")]),e._l(e.checkedRoleItem,function(t){return[i("v-uni-text",[e._v(e._s(t.postName)+"，")])]})],2)],1),i("v-uni-button",{staticClass:"button-form",attrs:{"form-type":"submit",type:"primary",loading:e.loading,disabled:e.disabled}},[e._v("提交")]),i("uni-drawer",{attrs:{visible:e.showDrawer,mode:"left"},on:{close:function(t){t=e.$handleEvent(t),e.closeDrawer(t)}}},[i("uni-segmented-control",{attrs:{current:e.tabCurrent,values:e.tabItems,"style-type":"text","active-color":"#007aff"},on:{clickItem:function(t){t=e.$handleEvent(t),e.onClickTabItem(t)}}}),i("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmitCheckbox(t)},reset:function(t){t=e.$handleEvent(t),e.formResetCheckbox(t)}}},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0===e.tabCurrent,expression:"tabCurrent === 0"}]},[i("v-uni-checkbox-group",{attrs:{name:"dept"}},e._l(e.checkbox_Dept,function(t){return i("v-uni-label",{key:t.deptId,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[e._v(e._s(t.deptName))]),i("v-uni-view",[i("v-uni-checkbox",{attrs:{value:JSON.stringify(t),checked:t.checked}})],1)],1)}),1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1===e.tabCurrent,expression:"tabCurrent === 1"}]},[i("v-uni-checkbox-group",{attrs:{name:"sysRoles"}},e._l(e.checkbox_sysRoles,function(t){return i("v-uni-label",{key:t.postId,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[e._v(e._s(t.postName))]),i("v-uni-view",[i("v-uni-checkbox",{attrs:{value:JSON.stringify(t),checked:t.checked}})],1)],1)}),1)],1),i("v-uni-view",{staticClass:"page-section-btns flex-space-between"},[i("v-uni-view",[i("v-uni-button",{attrs:{size:"mini"},on:{click:function(t){t=e.$handleEvent(t),e.closeDrawer(t)}}},[e._v("返回")])],1),i("v-uni-view",[i("v-uni-button",{attrs:{type:"primary",size:"mini",formType:"submit"}},[e._v("确定")])],1)],1)],1)],1)],1)],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})}}]);