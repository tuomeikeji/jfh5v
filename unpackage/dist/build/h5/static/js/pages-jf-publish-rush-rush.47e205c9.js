(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-jf-publish-rush-rush"],{"2b28":function(t,e,a){"use strict";a.r(e);var i=a("4597"),n=a("4867");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("c59d");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"716020ca",null);e["default"]=r.exports},"3d32":function(t,e,a){var i=a("d0b07");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("0fa9aac8",i,!0,{sourceMap:!1,shadowMode:!1})},"3e4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-page-body",staticStyle:{"background-color":"#FFFFFF"}},[a("v-uni-form",{staticClass:"page-section",on:{submit:function(e){e=t.$handleEvent(e),t.formSubmit(e)}}},[a("v-uni-view",{staticClass:"page-section-title"},[a("v-uni-text",{staticClass:"uni-text-red"},[t._v("*")]),t._v("任务目标："),a("v-uni-text",{staticClass:"uni-text-small"},[t._v("(标题不得超过50字)")])],1),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{attrs:{name:"title","auto-height":"true",maxlength:"-1"}})],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticClass:"page-section-title"},[a("v-uni-text",{staticClass:"uni-text-red"},[t._v("*")]),t._v("任务内容：")],1),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{attrs:{name:"content","auto-height":"true",maxlength:"-1"}})],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticClass:"clear"},[a("v-uni-label",{staticClass:"page-section-lable"},[t._v("积分类型：")]),a("v-uni-input",{staticClass:"page-section-input",attrs:{type:"text",value:t.types[t.arrIndexType].typeName,name:"type",disabled:"true"}})],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticClass:"page-section-title"},[t._v("备注：")]),a("v-uni-view",{staticClass:"page-section-demo"},[a("v-uni-textarea",{staticStyle:{"font-size":"28upx"},attrs:{"auto-height":"true",name:"remark"}})],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticClass:"clear",staticStyle:{padding:"24upx 22upx"}},[a("v-uni-label",{staticClass:"page-section-lable",staticStyle:{padding:"0"},attrs:{for:"personNum"}},[a("v-uni-text",{staticClass:"uni-text-red"},[t._v("*")]),t._v("输入限制人数：")],1),a("v-uni-input",{staticClass:"page-section-input",staticStyle:{border:"1px solid #EEEEEE",padding:"0"},attrs:{type:"text",id:"personNum",name:"personNum"}})],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticStyle:{padding:"0 30upx 24upx 30upx"}},[a("v-uni-view",{staticClass:"uni-title"},[t._v("可用积分:"+t._s(t.allPoints)+"分")]),a("v-uni-view",{staticClass:"clear"},[a("v-uni-label",{staticClass:"page-section-lable",staticStyle:{padding:"0"},attrs:{for:"addIntegral"}},[a("v-uni-text",{staticClass:"uni-text-red"},[t._v("*")]),t._v("奖励积分：")],1),a("v-uni-input",{staticClass:"page-section-input",staticStyle:{border:"1px solid #EEEEEE",padding:"0"},attrs:{type:"text",id:"addIntegral",name:"addIntegral"}})],1)],1),a("v-uni-view",{staticClass:"form-line"}),a("v-uni-view",{staticClass:"select-section",staticStyle:{"padding-bottom":"20upx"}},[a("v-uni-view",{staticClass:"right-arrow",staticStyle:{color:"#4d96f5","font-size":"32upx",padding:"20upx 0"},on:{click:function(e){e=t.$handleEvent(e),t.showDrawerFun(e)}}},[a("v-uni-text",{staticClass:"uni-text-red"},[t._v("*")]),t._v("选择范围")],1),a("v-uni-view",{staticStyle:{"padding-bottom":"20upx"}},[a("v-uni-text",[t._v("所选部门：")]),t._l(t.checkedDeptItem,function(e){return[a("v-uni-text",[t._v(t._s(e.deptName)+"，")])]})],2),a("v-uni-view",[a("v-uni-text",[t._v("所选职位：")]),t._l(t.checkedRoleItem,function(e){return[a("v-uni-text",[t._v(t._s(e.postName)+"，")])]})],2)],1),a("v-uni-button",{staticClass:"button-form",attrs:{"form-type":"submit",type:"primary",loading:t.loading,disabled:t.disabled}},[t._v("提交")])],1),a("uni-drawer",{attrs:{visible:t.showDrawer,mode:"left"},on:{close:function(e){e=t.$handleEvent(e),t.closeDrawer(e)}}},[a("uni-segmented-control",{attrs:{current:t.tabCurrent,values:t.tabItems,"style-type":"text","active-color":"#007aff"},on:{clickItem:function(e){e=t.$handleEvent(e),t.onClickTabItem(e)}}}),a("v-uni-form",{on:{submit:function(e){e=t.$handleEvent(e),t.formSubmitCheckbox(e)},reset:function(e){e=t.$handleEvent(e),t.formResetCheckbox(e)}}},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0===t.tabCurrent,expression:"tabCurrent === 0"}]},[a("v-uni-checkbox-group",{attrs:{name:"dept"}},t._l(t.checkbox_Dept,function(e){return a("v-uni-label",{key:e.deptId,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[t._v(t._s(e.deptName))]),a("v-uni-view",[a("v-uni-checkbox",{attrs:{value:JSON.stringify(e),checked:e.checked}})],1)],1)}),1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1===t.tabCurrent,expression:"tabCurrent === 1"}]},[a("v-uni-checkbox-group",{attrs:{name:"sysRoles"}},t._l(t.checkbox_sysRoles,function(e){return a("v-uni-label",{key:e.postId,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[t._v(t._s(e.postName))]),a("v-uni-view",[a("v-uni-checkbox",{attrs:{value:JSON.stringify(e),checked:e.checked}})],1)],1)}),1)],1),a("v-uni-view",{staticClass:"page-section-btns flex-space-between"},[a("v-uni-view",[a("v-uni-button",{attrs:{size:"mini"},on:{click:function(e){e=t.$handleEvent(e),t.closeDrawer(e)}}},[t._v("返回")])],1),a("v-uni-view",[a("v-uni-button",{attrs:{type:"primary",size:"mini",formType:"submit"}},[t._v("确定")])],1)],1)],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},4597:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"segmented-control",class:{text:"text"===t.styleType},style:{borderColor:"text"===t.styleType?"":t.activeColor}},t._l(t.values,function(e,i){return a("v-uni-view",{key:i,staticClass:"segmented-control-item",class:[{text:"text"===t.styleType},{active:i===t.currentIndex}],style:{color:i===t.currentIndex?"text"===t.styleType?t.activeColor:"#fff":"text"===t.styleType?"#000":t.activeColor,backgroundColor:i===t.currentIndex&&"button"===t.styleType?t.activeColor:""},on:{click:function(e){e=t.$handleEvent(e),t._onClick(i)}}},[t._v(t._s(e))])}),1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},4867:function(t,e,a){"use strict";a.r(e);var i=a("4f01"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"4f01":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniSegmentedControl",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:0}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},created:function(){this.currentIndex=this.current},methods:{_onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}};e.default=i},"5a3e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visibleSync?a("v-uni-view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":t.showDrawer,"uni-drawer--right":t.rightMode},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e),t.moveHandle(e)}}},[a("v-uni-view",{staticClass:"uni-drawer__mask",on:{click:function(e){e=t.$handleEvent(e),t.close(e)}}}),a("v-uni-view",{staticClass:"uni-drawer__content"},[t._t("default")],2)],1):t._e()},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"697c":function(t,e,a){"use strict";a.r(e);var i=a("5a3e"),n=a("6df5");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("e986");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"6e5b5a1c",null);e["default"]=r.exports},"6c83":function(t,e,a){"use strict";a.r(e);var i=a("3e4a"),n=a("f5af");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("dd28");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"7286af4b",null);e["default"]=r.exports},"6df5":function(t,e,a){"use strict";a.r(e);var i=a("ad7d"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"97b9":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".page-section-btns[data-v-7286af4b]{position:fixed;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;box-sizing:border-box;-webkit-box-sizing:border-box;border-top:%?1?% solid #ddd;padding:%?20?% %?24?%}.page-section-btns-cell[data-v-7286af4b]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.page-section-btns-cell uni-button[data-v-7286af4b]{border-radius:0;-webkit-border-radius:0}.timeBox[data-v-7286af4b]{padding:%?24?% %?22?%}\n/* 日历相关 */.calendar-content[data-v-7286af4b]{padding:%?20?% 0;padding-bottom:%?60?%;font-size:%?26?%}.calendar-content>.calendar-title[data-v-7286af4b]{line-height:%?80?%;\n\t/* font-weight: bold; */color:#666;font-size:%?32?%;\n\t/* border-left: 2px #0d9ebb solid; */\n\t/* padding-left: 20upx; */margin:0 %?20?%}.calendar-tags-group[data-v-7286af4b]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin:0 %?10?%}.calendar-tags[data-v-7286af4b]{width:50%;-webkit-box-sizing:border-box;box-sizing:border-box}.calendar-tags-item[data-v-7286af4b]{padding:%?10?% %?20?%;border:%?1?% rgba(0,0,0,.2) solid;color:#333;-webkit-border-radius:%?10?%;border-radius:%?10?%;text-align:center;margin:%?10?%;background:#f8f8f8}.calendar-tags-item[data-v-7286af4b]:active{background:#f8f8f8}.checked .calendar-tags-item[data-v-7286af4b]{background:#007aff;color:#fff;border:%?1?% rgba(0,0,0,.1) solid}.calendar-button[data-v-7286af4b]{margin:%?10?% %?20?%}.calendar-info[data-v-7286af4b]{padding:0 %?20?%}.calendar-mask[data-v-7286af4b]{position:fixed;z-index:100;\n\ttop:%?90?%;\n\t\n\tbottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%;background:#fff}.calendar-box[data-v-7286af4b]{\n\t/* margin: 20upx; */border:%?1?% #f5f5f5 solid;\n\t/* border-radius: 10upx; */width:100%;height:100%;overflow:hidden;background:#fff}.calendar-button-groups[data-v-7286af4b]{position:absolute;width:100%;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.calendar-button-confirm[data-v-7286af4b]{width:50%;margin:%?10?%;border:%?1?% #eee solid;font-size:%?32?%}.calendar-button-confirm[data-v-7286af4b]:after{border:none}",""])},ad7d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniDrawer",props:{visible:{type:Boolean,default:!1},mode:{type:String,default:""},mask:{type:Boolean,default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1}},watch:{visible:function(t){var e=this;clearTimeout(this.watchTimer),setTimeout(function(){e.showDrawer=t},100),this.visibleSync&&clearTimeout(this.closeTimer),t?this.visibleSync=t:this.watchTimer=setTimeout(function(){e.visibleSync=t},300)}},created:function(){var t=this;this.visibleSync=this.visible,setTimeout(function(){t.showDrawer=t.visible},100),this.rightMode="right"===this.mode},methods:{close:function(){var t=this;this.showDrawer=!1,this.closeTimer=setTimeout(function(){t.visibleSync=!1,t.$emit("close")},200)},moveHandle:function(){}}};e.default=i},b5a3:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".uni-drawer[data-v-6e5b5a1c]{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:hidden;visibility:hidden;z-index:10001;height:100%}.uni-drawer.uni-drawer--right .uni-drawer__content[data-v-6e5b5a1c]{left:auto;right:0;-webkit-transform:translatex(100%);-ms-transform:translatex(100%);transform:translatex(100%)}.uni-drawer.uni-drawer--visible[data-v-6e5b5a1c]{visibility:visible}.uni-drawer.uni-drawer--visible .uni-drawer__content[data-v-6e5b5a1c]{-webkit-transform:translatex(0);-ms-transform:translatex(0);transform:translatex(0)}.uni-drawer.uni-drawer--visible .uni-drawer__mask[data-v-6e5b5a1c]{display:block;opacity:1}.uni-drawer__mask[data-v-6e5b5a1c]{display:block;opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);-webkit-transition:opacity .3s;-o-transition:opacity .3s;transition:opacity .3s}.uni-drawer__content[data-v-6e5b5a1c]{display:block;position:absolute;top:0;left:0;\n\t/* width: 61.8%; */width:100%;height:100%;background:#fff;-webkit-transition:all .3s ease-out;-o-transition:all .3s ease-out;transition:all .3s ease-out;-webkit-transform:translatex(-100%);-ms-transform:translatex(-100%);transform:translatex(-100%)}",""])},c59d:function(t,e,a){"use strict";var i=a("3d32"),n=a.n(i);n.a},d0b07:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".segmented-control[data-v-716020ca]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:75%;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden;border:%?1?% solid;-webkit-border-radius:%?10?%;border-radius:%?10?%}.segmented-control.text[data-v-716020ca]{border:0;-webkit-border-radius:0;border-radius:0}.segmented-control-item[data-v-716020ca]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;line-height:%?80?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:%?1?% solid}.segmented-control-item.active[data-v-716020ca]{color:#fff}.segmented-control-item.text[data-v-716020ca]{border-left:0;color:#000}.segmented-control-item.text.active[data-v-716020ca]{border-bottom-style:solid}.segmented-control-item[data-v-716020ca]:first-child{border-left-width:0}",""])},db32:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(a("697c")),n=s(a("2b28"));function s(t){return t&&t.__esModule?t:{default:t}}var o={components:{uniDrawer:i.default,uniSegmentedControl:n.default},data:function(){return{allPoints:0,arrIndexType:6,types:[],checkedUserInfo:[],loading:!1,disabled:!1,showDrawer:!1,tabCurrent:0,tabItems:["部门","职位"],checkbox_Dept:[],checkbox_sysRoles:[],checkedDeptItem:[],checkedRoleItem:[],checkedDeptIds:[],checkedRoleIds:[],reset:!1}},onShow:function(t){this.getAllPoints(),this.getDept()},methods:{getAllPoints:function(){var t=this;this.axios({url:this.GLOBAL.domain+"/leader/leaderManageIntegral",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("success_leaderManageIntegral_管理者可用积分",e),t.GLOBAL.successHttp(e),0==e.data.code&&(t.allPoints=e.data.data)}).catch(function(e){console.log("fail_获取审批人",e),t.GLOBAL.failHttp(e)})},getDept:function(){var t=this;this.axios({url:this.GLOBAL.domain+"/releaseTask/releaseTaskPage",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){console.log("success_releaseTaskPage_部门职位",e),t.GLOBAL.successHttp(e),0==e.data.code&&(t.types=e.data.data.its,t.checkbox_sysRoles=e.data.data.posts,t.checkbox_Dept=e.data.data.depts)}).catch(function(e){console.log("fail_releaseTaskPage_部门职位",e),t.GLOBAL.failHttp(e)})},formSubmit:function(t){console.log("form发生了submit事件，携带数据为："+JSON.stringify(t.detail.value));var e=this,a=t.detail.value.addIntegral,i=t.detail.value.remark,n=t.detail.value.title,s=t.detail.value.content,o=e.types[e.arrIndexType].typeId,r=t.detail.value.personNum;if(!n||!s||!a||!r)return uni.showModal({content:"请输入必填项",showCancel:!1}),!1;if(n.length>50)return uni.showModal({content:"标题超过50字",showCancel:!1}),!1;var l=/^[0-9]\d*$/;return l.test(a)&&l.test(r)?a*r>e.allPoints?(uni.showModal({content:"您的积分不足",showCancel:!1}),!1):e.checkedDeptIds.length<0&&e.checkedRoleIds.length<0?(uni.showModal({content:"请选择接受此项任务的部门及职位",showCancel:!1}),!1):(console.log("表单提交数据:","addPoints:",a,e.allPoints,",title:",n,",typeId:",o,",deptId:",e.checkedDeptIds,",postId",e.checkedRoleIds,",人数:",r),uni.showLoading({mask:!0,title:"提交中..."}),e.loading=!0,e.disabled=!0,void e.axios({url:e.GLOBAL.domain+"/releaseTask/saveReleTask",method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},data:e.$qs.stringify({taskIntegral:a,remark:i,integralTypeId:o,title:n,content:s,taskTypeId:2,peopleNum:r,deptId:e.checkedDeptIds,postId:e.checkedRoleIds},{arrayFormat:"repeat"})}).then(function(t){console.log("success_申请成功----",t),e.GLOBAL.successHttp(t),0==t.data.code?uni.showModal({content:"提交成功",showCancel:!1,success:function(){uni.navigateBack()}}):uni.showModal({content:"提交发生错误，请重新提交",showCancel:!1}),e.loading=!1,e.disabled=!1,uni.hideLoading()}).catch(function(t){console.log("fail_申请失败",t),e.GLOBAL.failHttp(t),e.loading=!1,e.disabled=!1,uni.hideLoading()})):(uni.showModal({content:"分数项请输入正整数",showCancel:!1}),!1)},formSubmitCheckbox:function(t){var e=this;console.log("formSubmitCheckbox选择部门，职位 携带值为:",t.detail.value);var a=[],i=[],n=[],s=[];t.detail.value.dept.forEach(function(t){a.push(JSON.parse(t)),i.push(JSON.parse(t).deptId)}),t.detail.value.sysRoles.forEach(function(t){n.push(JSON.parse(t)),s.push(JSON.parse(t).postId)}),this.checkedDeptItem=a,this.checkedDeptIds=i,this.checkedRoleItem=n,this.checkedRoleIds=s,this.checkbox_Dept.forEach(function(t){e.checkedDeptIds.some(function(e){return e==t.deptId})?t.checked=!0:t.checked=!1}),this.checkbox_sysRoles.forEach(function(t){e.checkedRoleIds.some(function(e){return e==t.postId})?t.checked=!0:t.checked=!1}),this.showDrawer=!1},showDrawerFun:function(){this.showDrawer=!0},closeDrawer:function(){this.showDrawer=!1},onClickTabItem:function(t){this.tabCurrent!==t&&(this.tabCurrent=t)}}};e.default=o},db9f:function(t,e,a){var i=a("b5a3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("93f2019e",i,!0,{sourceMap:!1,shadowMode:!1})},dd28:function(t,e,a){"use strict";var i=a("f1a1"),n=a.n(i);n.a},e986:function(t,e,a){"use strict";var i=a("db9f"),n=a.n(i);n.a},f1a1:function(t,e,a){var i=a("97b9");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("4831371a",i,!0,{sourceMap:!1,shadowMode:!1})},f5af:function(t,e,a){"use strict";a.r(e);var i=a("db32"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a}}]);